// Code generated by protoc-gen-ws-ts. DO NOT EDIT.
//
// Source: v1/identity.proto

import type { YamuxSession } from "protoc-gen-ws/yamux.js";
import { callUnary, openStream, ServerStream, ClientStream, BidiStream } from "protoc-gen-ws/transport.js";
import { toBinary, fromBinary } from "@bufbuild/protobuf";
import { type CreateUserRequest, type CreateUserResponse, type GetUserRequest, type GetUserResponse, type WatchUsersRequest, type UserEvent, type ImportUsersResponse, type SyncUsersRequest, type SyncUsersResponse, CreateUserRequestSchema, CreateUserResponseSchema, GetUserRequestSchema, GetUserResponseSchema, WatchUsersRequestSchema, UserEventSchema, ImportUsersResponseSchema, SyncUsersRequestSchema, SyncUsersResponseSchema } from "./identity_pb.js";

export const IdentityServiceName = "example.v1.IdentityService";

export const IdentityServiceCreateUserMethod = "example.v1.IdentityService/CreateUser";
export const IdentityServiceGetUserMethod = "example.v1.IdentityService/GetUser";
export const IdentityServiceWatchUsersMethod = "example.v1.IdentityService/WatchUsers";
export const IdentityServiceImportUsersMethod = "example.v1.IdentityService/ImportUsers";
export const IdentityServiceSyncUsersMethod = "example.v1.IdentityService/SyncUsers";

export class IdentityServiceWSClient {
  constructor(private session: YamuxSession) {}

  async createUser(req: CreateUserRequest): Promise<CreateUserResponse> {
    return callUnary(
      this.session,
      "example.v1.IdentityService/CreateUser",
      toBinary(CreateUserRequestSchema, req),
      (b) => fromBinary(CreateUserResponseSchema, b),
    );
  }

  async getUser(req: GetUserRequest): Promise<GetUserResponse> {
    return callUnary(
      this.session,
      "example.v1.IdentityService/GetUser",
      toBinary(GetUserRequestSchema, req),
      (b) => fromBinary(GetUserResponseSchema, b),
    );
  }

  async watchUsers(req: WatchUsersRequest): Promise<ServerStream<UserEvent>> {
    const stream = await openStream(this.session, "example.v1.IdentityService/WatchUsers");
    await stream.send(toBinary(WatchUsersRequestSchema, req));
    return new ServerStream(stream, (b) => fromBinary(UserEventSchema, b));
  }

  async importUsers(): Promise<ClientStream<CreateUserRequest, ImportUsersResponse>> {
    const stream = await openStream(this.session, "example.v1.IdentityService/ImportUsers");
    return new ClientStream(stream, (m) => toBinary(CreateUserRequestSchema, m), (b) => fromBinary(ImportUsersResponseSchema, b));
  }

  async syncUsers(): Promise<BidiStream<SyncUsersRequest, SyncUsersResponse>> {
    const stream = await openStream(this.session, "example.v1.IdentityService/SyncUsers");
    return new BidiStream(stream, (m) => toBinary(SyncUsersRequestSchema, m), (b) => fromBinary(SyncUsersResponseSchema, b));
  }

}

